{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\Projects\\\\CrimesAppReact\\\\firstproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import _ from'lodash';import ListGroup from'./listGroup';import Pagination from'./pagination';import{paginate}from'./paginate';import CrimeServices from'./crimeServices';var Crimes=/*#__PURE__*/function(_Component){_inherits(Crimes,_Component);var _super=_createSuper(Crimes);function Crimes(){var _this;_classCallCheck(this,Crimes);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={crimes:[],crime:[],categories:[],elements:[],selectedCategory:'allCategories',currentPage:1,pageSize:5,sortColumn:{path:'',order:''}};_this.filterCrimes=function(crimes,cat){var categories=cat!=='allCategories'?crimes.filter(function(c){if(c.category_id===cat){return c.category_id;}}):crimes;return categories;};_this.handleSort=function(path,sortColumn){if(sortColumn.path===path){sortColumn.order=sortColumn.order==='asc'?'desc':'asc';}else{sortColumn.path=path;sortColumn.order='asc';}_this.setState({sortColumn:sortColumn});};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.selectedCategoryChange=function(category){var selectedCategory=category;_this.setState({selectedCategory:selectedCategory});var currentPage=1;_this.setState({currentPage:currentPage});};return _this;}_createClass(Crimes,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var crimes,cat,categories,elements;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return CrimeServices.getCrimes();case 2:crimes=_context.sent;this.setState({crimes:crimes});cat=[];crimes.map(function(c){cat.push(c.category_id);});categories=_.uniq(cat);this.setState({categories:categories});elements=this.state.selectedCategory==='allCategories'?this.state.crimes:null;this.setState({elements:elements});case 10:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,crimes=_this$state.crimes,selectedCategory=_this$state.selectedCategory,sortColumn=_this$state.sortColumn,currentPage=_this$state.currentPage,pageSize=_this$state.pageSize,categories=_this$state.categories;var elements=selectedCategory!=='allCategories'?this.filterCrimes(crimes,selectedCategory):crimes;var sorted=_.orderBy(elements,[sortColumn.path],[sortColumn.order]);var rows=paginate(sorted,currentPage,pageSize);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 m-2\"},/*#__PURE__*/React.createElement(ListGroup,{allCategories:categories,selectedCategory:selectedCategory,onCategoryChange:this.selectedCategoryChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col m-4\"},/*#__PURE__*/React.createElement(\"p\",null,\"Showing \",rows.length,\" crimes in the database.\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('id',sortColumn);}},\"#\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('category_id',sortColumn);}},\"Category\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('latitude',sortColumn);}},\"Latitud\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('longitude',sortColumn);}},\"Longitude\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('street_name',sortColumn);}},\"Street Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Outcome\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this2.handleSort('month',sortColumn);}},\"Month\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,rows.map(function(out){return/*#__PURE__*/React.createElement(\"tr\",{key:out.id},/*#__PURE__*/React.createElement(\"td\",null,out.id),/*#__PURE__*/React.createElement(\"td\",null,out.category_id),/*#__PURE__*/React.createElement(\"td\",null,out.latitude),/*#__PURE__*/React.createElement(\"td\",null,out.longitude),/*#__PURE__*/React.createElement(\"td\",null,out.street_name),/*#__PURE__*/React.createElement(\"td\",null,out.outcome_status),/*#__PURE__*/React.createElement(\"td\",null,out.month),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:{pathname:'/crimeDetails/'+out.id,crime:{out:out}}},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\"},\"Details\"))));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Pagination,{itemsCount:elements.length,pageSize:pageSize,currentPage:currentPage,onPageChange:this.handlePageChange})))));}}]);return Crimes;}(Component);export default Crimes;","map":{"version":3,"sources":["C:/Users/Jesus Sicairos/Desktop/Projects/CrimesAppReact/firstproject/src/components/crime/crimesComponent.js"],"names":["React","Component","Link","_","ListGroup","Pagination","paginate","CrimeServices","Crimes","state","crimes","crime","categories","elements","selectedCategory","currentPage","pageSize","sortColumn","path","order","filterCrimes","cat","filter","c","category_id","handleSort","setState","handlePageChange","page","selectedCategoryChange","category","getCrimes","map","push","uniq","sorted","orderBy","rows","length","out","id","latitude","longitude","street_name","outcome_status","month","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport _ from 'lodash';\r\nimport ListGroup from './listGroup';\r\nimport Pagination from './pagination';\r\nimport { paginate } from './paginate';\r\nimport CrimeServices from './crimeServices';\r\n\r\nclass Crimes extends Component {\r\n    state = {\r\n        crimes: [],\r\n        crime:[],\r\n        categories: [],\r\n        elements: [],\r\n        selectedCategory:'allCategories',\r\n        currentPage: 1,\r\n        pageSize: 5,\r\n        sortColumn: {path: '', order:''}\r\n    }\r\n    async componentDidMount() {\r\n        const crimes = await CrimeServices.getCrimes();\r\n        this.setState({crimes});\r\n\r\n         const cat = [];\r\n        \r\n        crimes.map(c => {\r\n              cat.push(c.category_id)\r\n        });\r\n        const categories = _.uniq(cat);\r\n        this.setState({ categories });\r\n\r\n        const elements = this.state.selectedCategory === 'allCategories' ?  this.state.crimes: null;\r\n        this.setState({ elements });\r\n    }\r\n    filterCrimes = (crimes, cat) => {\r\n        const categories = cat !== 'allCategories' ? crimes.filter(c => {\r\n           if (c.category_id === cat){\r\n               return c.category_id\r\n           }\r\n        }) : crimes;\r\n        return categories;\r\n    }\r\n    handleSort = (path, sortColumn) => {\r\n        if (sortColumn.path === path){\r\n            sortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n        } else{\r\n            sortColumn.path = path;\r\n            sortColumn.order = 'asc';\r\n        }\r\n        this.setState({sortColumn});\r\n    }\r\n    handlePageChange = page => {\r\n        this.setState({ currentPage:page })\r\n    }\r\n\r\n    handlePageChange = page => {\r\n        this.setState({ currentPage:page })\r\n    }\r\n    selectedCategoryChange = category  => {\r\n        const selectedCategory = category;\r\n        this.setState({ selectedCategory });\r\n\r\n        const currentPage = 1;\r\n        this.setState({ currentPage });\r\n\r\n    }\r\n\r\n    render() { \r\n        const { crimes, selectedCategory, sortColumn, currentPage, pageSize, categories } = this.state;\r\n        const elements = selectedCategory !== 'allCategories' ? this.filterCrimes(crimes, selectedCategory) : crimes;\r\n        const sorted = _.orderBy(elements,[sortColumn.path], [sortColumn.order])\r\n        const rows = paginate(sorted, currentPage, pageSize);\r\n        return ( \r\n            <React.Fragment>\r\n                <div className='row'>\r\n                    <div className=\"col-3 m-2\">\r\n                        <ListGroup \r\n                            allCategories={ categories } \r\n                            selectedCategory={ selectedCategory } \r\n                            onCategoryChange={ this.selectedCategoryChange} \r\n                        />\r\n                    </div>\r\n                    <div className=\"col m-4\">\r\n                        <p>Showing {rows.length} crimes in the database.</p>\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('id', sortColumn)}>#</th>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('category_id', sortColumn)}>Category</th>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('latitude', sortColumn)}>Latitud</th>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('longitude', sortColumn)}>Longitude</th>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('street_name', sortColumn)}>Street Name</th>\r\n                                    <th scope=\"col\">Outcome</th>\r\n                                    <th scope=\"col\" onClick={() => this.handleSort('month', sortColumn)}>Month</th>\r\n                                    <th scope=\"col\">Delete</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {rows.map(out => (\r\n                                    <tr key={out.id}>\r\n                                        <td>{out.id}</td>\r\n                                        <td>{out.category_id}</td>\r\n                                        <td>{out.latitude}</td>\r\n                                        <td>{out.longitude}</td>\r\n                                        <td>{out.street_name}</td>\r\n                                        <td>{out.outcome_status}</td>\r\n                                        <td>{out.month}</td>\r\n                                        <td>\r\n                                            <Link to={{\r\n                                                        pathname:'/crimeDetails/'+out.id,\r\n                                                        crime: {\r\n                                                            out,\r\n                                                            }\r\n                                                    }}> \r\n                                            <button className='btn btn-primary'>\r\n                                                Details\r\n                                            </button>\r\n                                            </Link>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                        <div>\r\n                            <Pagination \r\n                                itemsCount={elements.length} \r\n                                pageSize={pageSize} \r\n                                currentPage={currentPage} \r\n                                onPageChange={this.handlePageChange} \r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </React.Fragment>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Crimes;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jesus Sicairos\\\\Desktop\\\\ReactJS\\\\firstproject\\\\src\\\\components\\\\app.js\";\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport NavBar from './navbar';\nimport Crime from './crime/crimes';\nimport Login from './account/login';\nimport Signup from './account/signup';\nimport userService from './account/userService';\nimport crimeServices from './crime/crimeServices';\nimport LoadCrimes from './crime/loadCrimes';\nimport CrimeDetails from './crime/crimeDetails';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      crimes: [],\n      elements: [],\n      categories: [],\n      selectedCategory: 'allCategories',\n      itemsCount: 0,\n      pageSize: 5,\n      currentPage: 1,\n      sortColumn: {\n        path: 'id',\n        order: 'asc'\n      },\n      session: false,\n      token: false,\n      crime: [],\n      updated: false\n    };\n\n    this.handleReset = () => {\n      const counters = this.state.counters.map(c => {\n        c.value = 0;\n        return c;\n      });\n      this.setState({\n        counters\n      });\n    };\n\n    this.handleIncrement = counterId => {\n      const counters = this.state.counters.map(c => {\n        if (c.id === counterId) {\n          c.value = c.value + 1;\n        }\n\n        return c;\n      });\n      this.setState({\n        counters\n      });\n    };\n\n    this.handleDecrement = counterId => {\n      const counters = this.state.counters.map(c => {\n        if (c.id === counterId) {\n          c.value = c.value - 1;\n        }\n\n        return c;\n      });\n      this.setState(counters);\n    };\n\n    this.handleDelete = counterId => {\n      const counters = this.state.counters.filter(c => c.id !== counterId);\n      this.setState({\n        counters\n      });\n    };\n\n    this.handleDeleteMovie = movieId => {\n      const movies = this.state.movies.filter(c => c.movie.id !== movieId);\n      this.setState({\n        movies\n      });\n    };\n\n    this.handleUpdate = () => {\n      this.setState({\n        updated: true\n      });\n    };\n\n    this.handleLogOut = () => {\n      if (!userService.signout()) {\n        const session = false;\n        this.setState({\n          session\n        });\n      }\n    };\n\n    this.handlesubmitLoad = e => {\n      e.preventDefault();\n      const date = {\n        'date': document.getElementById('date').value\n      };\n      crimeServices.loadCrimes(date);\n    };\n\n    this.handlesubmitSignup = async e => {\n      e.preventDefault();\n      const usr = {\n        firstName: document.getElementById('firstName').value,\n        lastName: document.getElementById('lastName').value,\n        username: document.getElementById('username').value,\n        email: document.getElementById('email').value,\n        password: document.getElementById('password').value\n      };\n      const signUp = userService.signUp(usr);\n      return signUp;\n    };\n\n    this.handleCrimesDetails = id => {\n      // const crime = crimeServices.crimeDetails(id);\n      // this.setState({crime});\n      // return <Redirect to='/edit' />\n      return '';\n    };\n\n    this.selectedCategoryChange = category => {\n      const selectedCategory = category;\n      this.setState({\n        selectedCategory\n      });\n      const currentPage = 1;\n      this.setState({\n        currentPage\n      });\n    };\n\n    this.handleSubmitLogin = this.handleSubmitLogin.bind(this);\n  }\n\n  async componentDidMount() {\n    const crimes = await crimeServices.getCrimes();\n    this.setState({\n      crimes\n    }); // const cat = [];\n    // this.state.post.map(c => {\n    //       cat.push(c.category_id)\n    // });\n    // const categories = _.uniq(cat);\n    // this.setState({ categories });\n    // const elements = this.state.selectedCategory === 'allCategories' ?  this.state.post: null;\n    // this.setState({ elements })\n    // const itemsCount = this.state.elements.length;\n    // this.setState({itemsCount})\n\n    const token = userService.getSession();\n\n    if (token) {\n      const session = true;\n      this.setState({\n        session\n      });\n      this.setState({\n        token\n      });\n    }\n  } // componentDidUpdate(){\n  //     console.log(this.state);\n  // }\n\n\n  // handleSort = path => {\n  //     const sortColumn = { ...this.state.sortColumn }\n  //     if (sortColumn.path === path){\n  //         sortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\n  //     } else{\n  //         sortColumn.path = path;\n  //         sortColumn.order = 'asc';\n  //     }\n  //     this.setState({sortColumn});\n  // }\n  async handleSubmitLogin(e) {\n    e.preventDefault();\n    const usr = {\n      userName: document.getElementById('userName').value,\n      password: document.getElementById('password').value\n    };\n\n    if (userService.login(usr)) {\n      const session = true;\n      this.setState({\n        session\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      session: this.state.session,\n      logOut: this.handleLogOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, this.state.session ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 48\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(Login, {\n      onSubmit: this.handleSubmitLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, this.state.session ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 48\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(Signup, {\n      onSubmit: this.handlesubmitSignup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/loadCrimes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(LoadCrimes, {\n      onSubmit: this.handlesubmitLoad,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/crimeDetails/:id\",\n      render: () => /*#__PURE__*/React.createElement(CrimeDetails, {\n        handleUpdat: this.handleUpdate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 67\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }, this.state.session ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 48\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(Crime, {\n      crimes: this.state.crimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Jesus Sicairos/Desktop/ReactJS/firstproject/src/components/app.js"],"names":["React","Component","Route","Switch","Redirect","NavBar","Crime","Login","Signup","userService","crimeServices","LoadCrimes","CrimeDetails","App","constructor","state","crimes","elements","categories","selectedCategory","itemsCount","pageSize","currentPage","sortColumn","path","order","session","token","crime","updated","handleReset","counters","map","c","value","setState","handleIncrement","counterId","id","handleDecrement","handleDelete","filter","handleDeleteMovie","movieId","movies","movie","handleUpdate","handleLogOut","signout","handlesubmitLoad","e","preventDefault","date","document","getElementById","loadCrimes","handlesubmitSignup","usr","firstName","lastName","username","email","password","signUp","handleCrimesDetails","selectedCategoryChange","category","handleSubmitLogin","bind","componentDidMount","getCrimes","getSession","userName","login","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport NavBar from './navbar';\r\nimport Crime from './crime/crimes';\r\nimport Login from './account/login';\r\nimport Signup from './account/signup';\r\nimport userService from './account/userService';\r\nimport crimeServices from './crime/crimeServices';\r\nimport LoadCrimes from './crime/loadCrimes';\r\nimport CrimeDetails from './crime/crimeDetails';\r\n\r\nclass App extends Component {\r\n    state = {\r\n        crimes:[],\r\n        elements: [],\r\n        categories: [],\r\n        selectedCategory: 'allCategories',\r\n        itemsCount:0,\r\n        pageSize:5,\r\n        currentPage: 1,\r\n        sortColumn: {path: 'id', order:'asc'},\r\n        session: false,\r\n        token: false,\r\n        crime: [],\r\n        updated: false\r\n    }\r\n        constructor(){\r\n        super()\r\n        this.handleSubmitLogin = this.handleSubmitLogin.bind(this);\r\n    }\r\n    async componentDidMount() {\r\n        const crimes = await crimeServices.getCrimes();\r\n        this.setState({crimes});\r\n\r\n        // const cat = [];\r\n        \r\n        // this.state.post.map(c => {\r\n        //       cat.push(c.category_id)\r\n        // });\r\n        // const categories = _.uniq(cat);\r\n        // this.setState({ categories });\r\n\r\n        // const elements = this.state.selectedCategory === 'allCategories' ?  this.state.post: null;\r\n        // this.setState({ elements })\r\n\r\n        // const itemsCount = this.state.elements.length;\r\n        // this.setState({itemsCount})\r\n\r\n        const token = userService.getSession();\r\n        if(token){\r\n            const session = true;\r\n            this.setState({ session })\r\n            this.setState({ token });\r\n        }\r\n    }\r\n    // componentDidUpdate(){\r\n    //     console.log(this.state);\r\n    // }\r\n\r\n    handleReset = () => {\r\n         const counters = this.state.counters.map(\r\n             c => {\r\n                 c.value = 0;\r\n                 return c\r\n             }\r\n         )\r\n         this.setState({ counters })\r\n         \r\n     }\r\n    handleIncrement = counterId =>{\r\n        const counters = this.state.counters.map(\r\n                c => {\r\n                    if ( c.id === counterId){\r\n                        c.value = c.value + 1;\r\n                    }                    \r\n                    return c\r\n                }\r\n            );\r\n\r\n        this.setState({ counters })\r\n\r\n    }\r\n    handleDecrement = counterId => {\r\n        const counters = this.state.counters.map(\r\n            c => {\r\n                if(c.id === counterId){\r\n                    c.value = c.value - 1;\r\n                }\r\n                return c\r\n            }\r\n        );\r\n        this.setState(counters);\r\n    }\r\n    handleDelete = counterId => {\r\n        const counters = this.state.counters.filter(c => c.id !== counterId)\r\n        this.setState({ counters })\r\n    }\r\n    handleDeleteMovie = movieId => {\r\n        const movies = this.state.movies.filter(c => c.movie.id !== movieId);\r\n        this.setState({ movies });\r\n    }\r\n    // handleLike = movieId => {\r\n    //     let id = movieId;\r\n    //     const movies = this.state.movies.filter(c =>{\r\n    //         if(c.movie.id === id){\r\n    //             c.movie.liked = !c.movie.liked;\r\n    //         }\r\n    //         return c\r\n    //     })\r\n    //     this.setState({ movies })\r\n    // }\r\n    handleUpdate = () => {\r\n        this.setState({ updated:true })\r\n    }\r\n    // handleSort = path => {\r\n    //     const sortColumn = { ...this.state.sortColumn }\r\n    //     if (sortColumn.path === path){\r\n    //         sortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n    //     } else{\r\n    //         sortColumn.path = path;\r\n    //         sortColumn.order = 'asc';\r\n    //     }\r\n    //     this.setState({sortColumn});\r\n    // }\r\n    async handleSubmitLogin(e) {\r\n        e.preventDefault();\r\n        const usr = {\r\n            userName: document.getElementById('userName').value,\r\n            password: document.getElementById('password').value\r\n          }\r\n        if(userService.login(usr)){\r\n            const session = true;\r\n            this.setState({session}); \r\n        }    \r\n    }\r\n    handleLogOut = () => {\r\n        \r\n        if (!userService.signout()) {\r\n            const session = false;\r\n            this.setState({ session });\r\n        }\r\n        \r\n    }\r\n    handlesubmitLoad = e => {\r\n        e.preventDefault();\r\n        const date = { 'date': document.getElementById('date').value};\r\n        crimeServices.loadCrimes(date);\r\n    }\r\n    handlesubmitSignup = async e => {\r\n        e.preventDefault();\r\n        const usr = {\r\n            firstName: document.getElementById('firstName').value,\r\n            lastName: document.getElementById('lastName').value,\r\n            username: document.getElementById('username').value,\r\n            email: document.getElementById('email').value,\r\n            password: document.getElementById('password').value\r\n\r\n        };\r\n\r\n        const signUp = userService.signUp(usr);\r\n        return signUp;\r\n    }\r\n    handleCrimesDetails = id =>{\r\n        // const crime = crimeServices.crimeDetails(id);\r\n        // this.setState({crime});\r\n        // return <Redirect to='/edit' />\r\n        return ''\r\n\r\n    }\r\n    selectedCategoryChange = category  => {\r\n        const selectedCategory = category;\r\n        this.setState({ selectedCategory });\r\n\r\n        const currentPage = 1;\r\n        this.setState({ currentPage });\r\n\r\n    }\r\n    render() { \r\n        return ( \r\n            <React.Fragment>\r\n                <NavBar session= { this.state.session } logOut={this.handleLogOut} />\r\n                <Switch>\r\n                    <Route path=\"/login\">\r\n                        { this.state.session ? <Redirect to='/' /> : <Redirect to='/login' /> }\r\n                        <Login onSubmit={this.handleSubmitLogin} />\r\n                    </Route>\r\n                    <Route path=\"/signup\">\r\n                        { this.state.session ? <Redirect to='/' /> : <Redirect to='/signup' /> }\r\n                        <Signup onSubmit={this.handlesubmitSignup} />\r\n                    </Route>\r\n                    <Route path=\"/loadCrimes\">\r\n                        <LoadCrimes onSubmit={ this.handlesubmitLoad }/>\r\n                    </Route>\r\n                    <Route path='/crimeDetails/:id' render={() => <CrimeDetails handleUpdat={this.handleUpdate} />} />\r\n                    <Route path=\"/\">\r\n                        { this.state.session ? <Redirect to='/' /> : <Redirect to='/login' /> }\r\n                        <Crime\r\n                            crimes={this.state.crimes}\r\n                        />\r\n                    </Route>\r\n                </Switch>\r\n            </React.Fragment>\r\n         );\r\n    }\r\n}\r\n \r\nexport default App;"]},"metadata":{},"sourceType":"module"}